---
version: "3"

vars:
  PROJECT_DIR:
    sh: "git rev-parse --show-toplevel"
  CLUSTER_DIR: "{{.PROJECT_DIR}}/clusters/lovenet"
  K3S_PRIMARY_MASTER_NODE_USERNAME: "ubuntu"

env:
  KUBECONFIG: "{{.CLUSTER_DIR}}/kubeconfig"

includes:
  formatter: .taskfiles/formatter.yml
  linter: .taskfiles/linter.yml

tasks:
  deps:
    - task: deps:pre-commit

  deps:pre-commit:
    desc: install/upgrade pre-commit deps
    cmds:
      - pre-commit install-hooks

  pre-commit:
    desc: Run pre-commit
    cmds:
      - pre-commit run --all-files
