---
mqtt:
  host: emqx.home.svc.cluster.local
  topic_prefix: frigate
  user: "${FRIGATE_MQTT_USER}"
  password: "${FRIGATE_MQTT_PASSWORD}"

ffmpeg:
  global_args: ["-hide_banner", "-loglevel", "warning"]
  hwaccel_args: preset-intel-qsv-h264

detectors:
  coral_pci:
    type: edgetpu
    device: pci

logger:
  default: info

database:
  path: /data/frigate.db

objects:
  track:
    - person
    - dog
  filters:
    person:
      min_area: 2500
      max_area: 100000
      threshold: 0.7
    dog:
      min_area: 1000
      max_area: 10000
      threshold: 0.7

cameras:
  amcrest-1:
    ffmpeg:
      inputs:
        - path: "rtsp://user:{FRIGATE_AMCREST_RTSP_PASSWORD}@amcrest-1:554/cam/realmonitor?channel=1?subtype=1"
          roles:
            - detect
        - path: "rtsp://user:{FRIGATE_AMCREST_RTSP_PASSWORD}@amcrest-1:554/cam/realmonitor?channel=1?subtype=0"
          roles:
            - record
            - rtmp
    rtmp:
      enabled: true
    objects:
      filters:
        person:
          min_area: 1500
          max_area: 100000
          threshold: 0.75
          min_score: 0.60
    snapshots:
      enabled: true
      timestamp: true
      bounding_box: true
      crop: false
    record:
      enabled: true
      retain_days: 5

  amcrest-2:
    ffmpeg:
      inputs:
        - path: "rtsp://user:{FRIGATE_AMCREST_RTSP_PASSWORD}@amcrest-2:554/cam/realmonitor?channel=1?subtype=1"
          roles:
            - detect
        - path: "rtsp://user:{FRIGATE_AMCREST_RTSP_PASSWORD}@amcrest-2:554/cam/realmonitor?channel=1?subtype=0"
          roles:
            - record
            - rtmp
    rtmp:
      enabled: true
    objects:
      filters:
        person:
          min_area: 1500
          max_area: 100000
          threshold: 0.75
          min_score: 0.60
    snapshots:
      enabled: true
      timestamp: true
      bounding_box: true
      crop: false
    record:
      enabled: true
      retain_days: 5

  amcrest-3:
    ffmpeg:
      inputs:
        - path: "rtsp://admin:{FRIGATE_AMCREST_RTSP_PASSWORD}@amcrest-3:554/cam/realmonitor?channel=1?subtype=1"
          roles:
            - detect
        - path: "rtsp://admin:{FRIGATE_AMCREST_RTSP_PASSWORD}@amcrest-3:554/cam/realmonitor?channel=1?subtype=1"
          roles:
            - record
            - rtmp
    rtmp:
      enabled: true
    objects:
      filters:
        person:
          min_area: 1500
          max_area: 100000
          threshold: 0.75
          min_score: 0.60
    snapshots:
      enabled: true
      timestamp: true
      bounding_box: true
      crop: false
    record:
      enabled: true
      retain_days: 5

  wyzecam-1:
    ffmpeg:
      inputs:
        - path: "rtsp://wyze:{FRIGATE_WYZECAM_RTSP_PASSWORD}@wyzecam-1/live"
          roles:
            - detect
        - path: "rtsp://wyze:{FRIGATE_WYZECAM_RTSP_PASSWORD}@wyzecam-1/live"
          roles:
            - record
            - rtmp
    rtmp:
      enabled: true
    objects:
      track:
        - dog
        - person
    snapshots:
      enabled: true
      timestamp: true
      bounding_box: true
      crop: false
    record:
      enabled: true
      retain_days: 5

  wyzecam-2:
    ffmpeg:
      inputs:
        - path: "rtsp://wyze:{FRIGATE_WYZECAM_RTSP_PASSWORD}@wyzecam-2/live"
          roles:
            - detect
        - path: "rtsp://wyze:{FRIGATE_WYZECAM_RTSP_PASSWORD}@wyzecam-2/live"
          roles:
            - record
            - rtmp
    rtmp:
      enabled: true
    objects:
      track:
        - dog
    snapshots:
      enabled: true
      timestamp: true
      bounding_box: true
      crop: false
    record:
      enabled: true
      retain_days: 5

  wyzecam-3:
    ffmpeg:
      inputs:
        - path: "rtsp://wyze:{FRIGATE_WYZECAM_RTSP_PASSWORD}@wyzecam-3/live"
          roles:
            - detect
        - path: "rtsp://wyze:{FRIGATE_WYZECAM_RTSP_PASSWORD}@wyzecam-3/live"
          roles:
            - record
            - rtmp
    rtmp:
      enabled: true
    objects:
      track:
        - dog
    snapshots:
      enabled: true
      timestamp: true
      bounding_box: true
      crop: false
    record:
      enabled: true
      retain_days: 5
