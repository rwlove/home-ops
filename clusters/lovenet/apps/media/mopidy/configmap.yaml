apiVersion: v1
kind: ConfigMap
metadata:
  name: mopidy-config
  labels:
    app: mopidy
data:
  mopidy.conf: |
    # For information about configuration values that can be set in this file see:
    #
    #   https://docs.mopidy.com/en/latest/config/
    #
    # Run `sudo mopidyctl config` to see the current effective config, based on
    # both defaults and this configuration file.

    # Lovely docs here: https://github.com/jaedb/Iris/wiki/Getting-started
    [http]
    hostname = 0.0.0.0
    default_app = iris
    port = 6680

    [spotify]
    username = "${MOPIDY_SPOTIFY_USERNAME}"
    password = "${MOPIDY_SPOTIFY_PASSWORD}"
    # Get these here: https://mopidy.com/ext/spotify/
    client_id = "${MOPIDY_SPOTIFY_CLIENT_ID}"
    client_secret = "${MOPIDY_SPOTIFY_CLIENT_SECRET}"
    bitrate = 320
    toplist_countries = US

    [iris]
    country = US
    locale = en_US

    [audio]
    # Please change the password from hackme here and in the icecast configmap!
    #output = lamemp3enc bitrate=320 ! shout2send async=false mount=listen ip=icecast port=8000 password=password

    [mpd]
    enabled = true
    hostname = 192.168.1.1
    max_connections = 20
    connection_timeout = 60
    zeroconf = Mopidy MPD server on $hostname

    [logging]
    verbosity = 4

    [local]
    enabled = true
    library = json
    media_dir = /music
    data_dir = /data
    playlists_dir = /data/playlists
    scan_timeout = 1000
    scan_flush_threshold = 1000
    excluded_file_extensions =
      .directory
      .html
      .jpeg
      .jpg
      .log
      .nfo
      .png
      .txt
