---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: vpa
  namespace: kube-system
spec:
  interval: 5m
  chart:
    spec:
      # registryUrl=https://charts.fairwinds.com/stable
      # renovate: registryUrl=https://charts.fairwinds.com/stable
      chart: vpa
      version: 1.2.1
      sourceRef:
        kind: HelmRepository
        name: fairwinds-charts
        namespace: flux-system
      interval: 5m
  values:
    rbac:
      # rbac.create -- If true, then rbac resources (clusterroles and clusterrolebindings) will be created for the selected components.
      create: true

    serviceAccount:
      # serviceAccount.create -- Specifies whether a service account should be created for each component
      create: true

    recommender:
      # recommender.enabled -- If true, the vpa recommender component will be installed.
      enabled: true

    updater:
      # updater.enabled -- If true, the updater component will be deployed
      enabled: true

    admissionController:
      # admissionController.enabled -- If true, will install the admission-controller component of vpa
      enabled: true
